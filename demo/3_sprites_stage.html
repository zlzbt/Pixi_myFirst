<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sprites（精灵）与stage（舞台）</title>
</head>
<script src="../pixi/pixi.min.js"></script>
<!-- <script src="https://pixijs.download/v4.5.5/pixi.js"></script> -->

<body>

</body>
<script>
    let Application = PIXI.Application,
        loader = PIXI.loader,
        resources = PIXI.loader.resources,
        TextureCache = PIXI.utils.TextureCache,
        Sprite = PIXI.Sprite;

    let app = new Application({
        width: 400,
        height: 400,
        antialiasing: true,
        transparent: false,
        resolution: 1
    });
    document.body.appendChild(app.view);

    /* let texture = PIXI.utils.TextureCache["../images/cat1.png"];
    let sprite = new PIXI.Sprite(texture);
    app.stage.addChild(sprite); */

    loader
        .add([ //调用一个add方法来加载数组中的图片
            {url:"https://raw.githubusercontent.com/zlzbt/Pixi_myFirst/master/images/cat1.png"},
            {url:"https://g.mdcdn.cn/h5/img/act/201711/new-1-1.png"}
        ])
        .on("progress", loadProgressHandler)
        .load(setup);

    // 每次加载一个文件时，progress事件就会被调用一次
    function loadProgressHandler(loader, resource) {
        console.log("loading: " + resource.url); 
        console.log("progress: " + loader.progress + "%"); 
    }

    function setup() {
        console.log("All files loaded");

        // 创建一个精灵
        let cat = new Sprite(resources["https://raw.githubusercontent.com/zlzbt/Pixi_myFirst/master/images/cat1.png"].texture);
        // console.log(cat._texture.textureCacheIds[0])

        cat.x = 96;  //定位 偏移左上角x方向
        cat.y = 96;  //定位 偏移左上角y方向

        cat.width = 80; //设置精灵宽度
        cat.height = 100; //设置精灵高度

        cat.scale.set(0.5, 0.5); //scale.set对精灵进行缩放

        cat.rotation = 0.5; // 旋转精灵

        cat.anchor.set(0.5, 0.5);  //更改精灵锚点位置  默认锚点就是精灵的左上角 也就是旋转中心的位置

        cat.pivot.set(32, 32)  //pivot轴心点设置了精灵的原点。 改变一个精灵的原点，你也就改变了它的坐标

        app.stage.addChild(cat);
        // cat1.visible = false; //使精灵消失的一种更简单、更有效的方法
        // app.stage.removeChild(cat1) //删除一个精灵
    }
</script>

</html>